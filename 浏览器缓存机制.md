## 介绍
**web缓存**是指一个web资源（如html，图片，js，数据等）存在于web服务器和客户端（浏览器）之间的副本。
缓存会根据进来的请求保存输出内容的副本。当下一个请求来到的时候，如果是相同的URL，缓存会根据缓存机制决定是直接使用副本响应访问请求，还是向服务器再次发送请求。比较常见的就是浏览器会缓存访问过的网站的页面，当再次访问这个URL地址的时候，如果网页没有更新，就不会再次下载网页，而是直接使用本地缓存的网页。只有当网站的资源明确地已经更新了，浏览器才会再次下载网页。
## 缓存的作用
+ 减少网络带宽的消耗。
+ 降低服务器压力。
+ 减少网络延迟，加快网页打开速度。
## 缓存的策略
通常浏览器缓存的策略分为两种：强制缓存（Expires，cache-control）和协商缓存（Last-modified，Etag），并且缓存策略都是通过设置HTTP Header来实现的。
浏览器发请求之前，会根据请求头的**Expires**或**Cache-control**字段判断是否命中强制缓存策略，如果命中，则直接使用缓存获取资源，并不会发送请求。如果没有命中强制缓存，浏览器会发送请求，根据请求头中的**Last-modified**或者**Etag**判断是否命中协商缓存。如果命中了协商缓存，则直接从缓存中读取资源。如果连协商缓存也没命中，则直接从服务器获取资源。
### 强制缓存
强制缓存简单理解就是给浏览器缓存设置过期时间，超过这个时间，缓存就过期了，浏览器需要重新请求。强制缓存主要是通过HTTP请求头中的**Cache-control**和**Expires**这两个字段控制。
#### Expires
**Expires**是HTTP1.0提出的一个表示资源过期时间的字段，它是一个绝对时间，由服务器返回。Expires受限于本地时间，如果修改了本地时间，可能会造成缓存失效。
#### Cache-control
**Cache-control**是HTTP1.1提出的一个表示资源过期时间的字段。它是一个相对时间。一般设置**Cache-control：max-age=315360000**表示过期时间。
### 协商缓存
当浏览器对某个资源的请求没有命中强制缓存时，就会发起一个请求，验证协商缓存是否命中。如果协商缓存命中，则请求响应返回的HTTP状态码为304和Not Modified。
协商缓存是利用**Last-modified，If-modified-since和Etag，If-None-match** 这两对header来管理的。





